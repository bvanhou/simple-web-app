{"version":3,"sources":["node_modules/browser-pack/_prelude.js","app/scripts/app.js","app/scripts/controllers/main-controller.js","app/scripts/services/contacts-service.js"],"names":[],"mappings":"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","file":"../front_end_code_exercise/project/bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// Controllers\nimport MainController from './controllers/main-controller.js';\n\n// Service\nimport ContactsService from './services/contacts-service.js';\n\n// Create app and assign modules\nangular.module('project', ['ui.router'])\n\n        // config routes\n        .config(function($stateProvider, $urlRouterProvider) {\n\n              $urlRouterProvider.otherwise('/');\n\n              $stateProvider\n                  .state('main', {\n                      url: '/',\n                      templateUrl: '../views/main.html',\n                      controller: 'MainController',\n                      controllerAs: 'main'\n                  })\n          })\n\n        // Controllers\n        .controller('MainController', MainController)\n\n        // Service\n        .service('ContactsService', ContactsService)\n","class MainController {\n  /* @ngInject */\n  constructor(ContactsService, $q) {\n\n    angular.extend(this, {\n      service:ContactsService,\n      $q:$q,\n      title: 'External Contacts',\n      summation: 'Select the client contacts associated with this offer',\n\n      // Headers\n      headers: [\n        {title: ''},\n        {title: 'Type'},\n        {title: 'Name'},\n        {title: 'Title'},\n        {title: 'Phone'},\n        {title: 'Ext.'},\n        {title: 'Fax'},\n        {title: 'Email'}\n      ],\n\n      // Contacts\n      contacts: [],\n      newItem: false,\n      activeHeader: null,\n      isExpanded: false\n\n    });\n\n    this.list();\n  }\n\n  list(){\n    return this.service.get()\n      .then((response) => {\n          if (Array.isArray(response.data))\n              this.contacts = response.data;\n        });\n  }\n\n  sort(key){\n    this.activeHeader = key;\n\n    var _key = key.toLowerCase();\n    this.contacts.sort((a, b) => {\n        var nameA=a[_key], nameB=b[_key];\n        if (nameA < nameB) //sort string ascending\n            return -1;\n        if (nameA > nameB)\n            return 1;\n        return 0 //default return value (no sorting)\n    });\n  }\n\n  insert(){\n    this.newItem = true;\n    this.contacts.push({'create':true});\n    //this.contacts[this.contacts.length].create = true;\n  }\n\n  delete(){\n    var contact = this.contacts.find(function (d) {\n        return d.selected === true;\n    });\n\n    if(contact != null){\n      var index = this.contacts.findIndex(x => x.selected==true);\n      this.contacts.splice(index,1);\n      this.service.remove(contact);\n    }\n  }\n\n  cancel(){\n    this.newItem = false;\n    this.contacts.splice(this.contacts.length-1,1);\n  }\n\n  save(contact){\n    this.newItem = false;\n    delete contact['create'];\n    this.service.create(contact);\n  }\n\n  collapse(){\n    $(\"input:checkbox:not(:checked)\").closest('tr').hide();\n    this.isExpanded = true;\n  }\n\n  expand(){\n    this.isExpanded = false;\n    $('tr').show();\n  }\n\n};\n\nmodule.exports = MainController;\n","class ContactsService {\n  /* @ngInject */\n  constructor($http, $q) {\n\n    angular.extend(this, {\n      $http:$http,\n      $q:$q\n    });\n  }\n\n  get() {\n    return this.$http.get('http://localhost:8080/contacts');\n\n  }\n\n  create(data) {\n    console.log('Send to Create Service');\n    console.log(data);\n    return this.$http.post('http://localhost:8080/contacts', data);\n  }\n\n  remove(data) {\n    console.log('Send to Delete Service');\n    console.log(data._id);\n\n    return this.$http.delete('http://localhost:8080/contacts/'+ data._id);\n  }\n\n};\n\nmodule.exports = ContactsService;\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhcHAvc2NyaXB0cy9hcHAuanMiLCJhcHAvc2NyaXB0cy9jb250cm9sbGVycy9tYWluLWNvbnRyb2xsZXIuanMiLCJhcHAvc2NyaXB0cy9zZXJ2aWNlcy9jb250YWN0cy1zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNDQTs7OztBQUdBOzs7Ozs7OztBQUVBO0FBTkE7QUFPQSxRQUFBLEFBQVEsT0FBUixBQUFlLFdBQVcsQ0FBMUIsQUFBMEIsQUFBQzs7QUFBM0IsQUFFUTtDQUZSLEFBR1MsT0FBTyxVQUFBLEFBQVMsZ0JBQVQsQUFBeUIsb0JBQW9CLEFBRS9DOzt1QkFBQSxBQUFtQixVQUFuQixBQUE2QixBQUU3Qjs7bUJBQUEsQUFDSyxNQURMLEFBQ1c7YUFBUSxBQUNOLEFBQ0w7cUJBRlcsQUFFRSxBQUNiO29CQUhXLEFBR0MsQUFDWjtzQkFMUixBQUNtQixBQUlHLEFBRXpCO0FBTnNCLEFBQ1g7QUFUdEI7O0FBQUEsQUFnQlE7Q0FoQlIsQUFpQlMsV0FqQlQsQUFpQm9COztBQWpCcEIsQUFtQlE7Q0FuQlIsQUFvQlMsUUFwQlQsQUFvQmlCOztBQXhCakI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJLEFDSE0sNkJBQ0o7QUFDQTswQkFBQSxBQUFZLGlCQUFaLEFBQTZCLElBQUk7MEJBRS9COztZQUFBLEFBQVEsT0FBUixBQUFlO2VBQU0sQUFDWCxBQUNSO1VBRm1CLEFBRWhCLEFBQ0g7YUFIbUIsQUFHWixBQUNQO2lCQUptQixBQUlSLEFBRVg7O0FBQ0E7ZUFBUyxDQUNQLEVBQUMsT0FETSxBQUNQLEFBQVEsTUFDUixFQUFDLE9BRk0sQUFFUCxBQUFRLFVBQ1IsRUFBQyxPQUhNLEFBR1AsQUFBUSxVQUNSLEVBQUMsT0FKTSxBQUlQLEFBQVEsV0FDUixFQUFDLE9BTE0sQUFLUCxBQUFRLFdBQ1IsRUFBQyxPQU5NLEFBTVAsQUFBUSxVQUNSLEVBQUMsT0FQ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QUFBTyxBQUFrRCxBQUMxRDs7OzsyQixBQUVNLE1BQU0sQUFDWDtjQUFBLEFBQVEsSUFBUixBQUFZLEFBQ1o7Y0FBQSxBQUFRLElBQUksS0FBWixBQUFpQixBQUVqQjs7YUFBTyxLQUFBLEFBQUssTUFBTCxBQUFXLE9BQU8sb0NBQW1DLEtBQTVELEFBQU8sQUFBMEQsQUFDbEU7Ozs7Ozs7QUFFRjs7QUFFRCxPQUFBLEFBQU8sVUFBUCxBQUFpQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvLyBDb250cm9sbGVyc1xuaW1wb3J0IE1haW5Db250cm9sbGVyIGZyb20gJy4vY29udHJvbGxlcnMvbWFpbi1jb250cm9sbGVyLmpzJztcblxuLy8gU2VydmljZVxuaW1wb3J0IENvbnRhY3RzU2VydmljZSBmcm9tICcuL3NlcnZpY2VzL2NvbnRhY3RzLXNlcnZpY2UuanMnO1xuXG4vLyBDcmVhdGUgYXBwIGFuZCBhc3NpZ24gbW9kdWxlc1xuYW5ndWxhci5tb2R1bGUoJ3Byb2plY3QnLCBbJ3VpLnJvdXRlciddKVxuXG4gICAgICAgIC8vIGNvbmZpZyByb3V0ZXNcbiAgICAgICAgLmNvbmZpZyhmdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XG5cbiAgICAgICAgICAgICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xuXG4gICAgICAgICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAgICAgICAuc3RhdGUoJ21haW4nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgdXJsOiAnLycsXG4gICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcuLi92aWV3cy9tYWluLmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdNYWluQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAnbWFpbidcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcblxuICAgICAgICAvLyBDb250cm9sbGVyc1xuICAgICAgICAuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLCBNYWluQ29udHJvbGxlcilcblxuICAgICAgICAvLyBTZXJ2aWNlXG4gICAgICAgIC5zZXJ2aWNlKCdDb250YWN0c1NlcnZpY2UnLCBDb250YWN0c1NlcnZpY2UpXG4iLCJjbGFzcyBNYWluQ29udHJvbGxlciB7XG4gIC8qIEBuZ0luamVjdCAqL1xuICBjb25zdHJ1Y3RvcihDb250YWN0c1NlcnZpY2UsICRxKSB7XG5cbiAgICBhbmd1bGFyLmV4dGVuZCh0aGlzLCB7XG4gICAgICBzZXJ2aWNlOkNvbnRhY3RzU2VydmljZSxcbiAgICAgICRxOiRxLFxuICAgICAgdGl0bGU6ICdFeHRlcm5hbCBDb250YWN0cycsXG4gICAgICBzdW1tYXRpb246ICdTZWxlY3QgdGhlIGNsaWVudCBjb250YWN0cyBhc3NvY2lhdGVkIHdpdGggdGhpcyBvZmZlcicsXG5cbiAgICAgIC8vIEhlYWRlcnNcbiAgICAgIGhlYWRlcnM6IFtcbiAgICAgICAge3RpdGxlOiAnJ30sXG4gICAgICAgIHt0aXRsZTogJ1R5cGUnfSxcbiAgICAgICAge3RpdGxlOiAnTmFtZSd9LFxuICAgICAgICB7dGl0bGU6ICdUaXRsZSd9LFxuICAgICAgICB7dGl0bGU6ICdQaG9uZSd9LFxuICAgICAgICB7dGl0bGU6ICdFeHQuJ30sXG4gICAgICAgIHt0aXRsZTogJ0ZheCd9LFxuICAgICAgICB7dGl0bGU6ICdFbWFpbCd9XG4gICAgICBdLFxuXG4gICAgICAvLyBDb250YWN0c1xuICAgICAgY29udGFjdHM6IFtdLFxuICAgICAgbmV3SXRlbTogZmFsc2UsXG4gICAgICBhY3RpdmVIZWFkZXI6IG51bGwsXG4gICAgICBpc0V4cGFuZGVkOiBmYWxzZVxuXG4gICAgfSk7XG5cbiAgICB0aGlzLmxpc3QoKTtcbiAgfVxuXG4gIGxpc3QoKXtcbiAgICByZXR1cm4gdGhpcy5zZXJ2aWNlLmdldCgpXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXNwb25zZS5kYXRhKSlcbiAgICAgICAgICAgICAgdGhpcy5jb250YWN0cyA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH0pO1xuICB9XG5cbiAgc29ydChrZXkpe1xuICAgIHRoaXMuYWN0aXZlSGVhZGVyID0ga2V5O1xuXG4gICAgdmFyIF9rZXkgPSBrZXkudG9Mb3dlckNhc2UoKTtcbiAgICB0aGlzLmNvbnRhY3RzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgdmFyIG5hbWVBPWFbX2tleV0sIG5hbWVCPWJbX2tleV07XG4gICAgICAgIGlmIChuYW1lQSA8IG5hbWVCKSAvL3NvcnQgc3RyaW5nIGFzY2VuZGluZ1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICBpZiAobmFtZUEgPiBuYW1lQilcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICByZXR1cm4gMCAvL2RlZmF1bHQgcmV0dXJuIHZhbHVlIChubyBzb3J0aW5nKVxuICAgIH0pO1xuICB9XG5cbiAgaW5zZXJ0KCl7XG4gICAgdGhpcy5uZXdJdGVtID0gdHJ1ZTtcbiAgICB0aGlzLmNvbnRhY3RzLnB1c2goeydjcmVhdGUnOnRydWV9KTtcbiAgICAvL3RoaXMuY29udGFjdHNbdGhpcy5jb250YWN0cy5sZW5ndGhdLmNyZWF0ZSA9IHRydWU7XG4gIH1cblxuICBkZWxldGUoKXtcbiAgICB2YXIgY29udGFjdCA9IHRoaXMuY29udGFjdHMuZmluZChmdW5jdGlvbiAoZCkge1xuICAgICAgICByZXR1cm4gZC5zZWxlY3RlZCA9PT0gdHJ1ZTtcbiAgICB9KTtcblxuICAgIGlmKGNvbnRhY3QgIT0gbnVsbCl7XG4gICAgICB2YXIgaW5kZXggPSB0aGlzLmNvbnRhY3RzLmZpbmRJbmRleCh4ID0+IHguc2VsZWN0ZWQ9PXRydWUpO1xuICAgICAgdGhpcy5jb250YWN0cy5zcGxpY2UoaW5kZXgsMSk7XG4gICAgICB0aGlzLnNlcnZpY2UucmVtb3ZlKGNvbnRhY3QpO1xuICAgIH1cbiAgfVxuXG4gIGNhbmNlbCgpe1xuICAgIHRoaXMubmV3SXRlbSA9IGZhbHNlO1xuICAgIHRoaXMuY29udGFjdHMuc3BsaWNlKHRoaXMuY29udGFjdHMubGVuZ3RoLTEsMSk7XG4gIH1cblxuICBzYXZlKGNvbnRhY3Qpe1xuICAgIHRoaXMubmV3SXRlbSA9IGZhbHNlO1xuICAgIGRlbGV0ZSBjb250YWN0WydjcmVhdGUnXTtcbiAgICB0aGlzLnNlcnZpY2UuY3JlYXRlKGNvbnRhY3QpO1xuICB9XG5cbiAgY29sbGFwc2UoKXtcbiAgICAkKFwiaW5wdXQ6Y2hlY2tib3g6bm90KDpjaGVja2VkKVwiKS5jbG9zZXN0KCd0cicpLmhpZGUoKTtcbiAgICB0aGlzLmlzRXhwYW5kZWQgPSB0cnVlO1xuICB9XG5cbiAgZXhwYW5kKCl7XG4gICAgdGhpcy5pc0V4cGFuZGVkID0gZmFsc2U7XG4gICAgJCgndHInKS5zaG93KCk7XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBNYWluQ29udHJvbGxlcjtcbiIsImNsYXNzIENvbnRhY3RzU2VydmljZSB7XG4gIC8qIEBuZ0luamVjdCAqL1xuICBjb25zdHJ1Y3RvcigkaHR0cCwgJHEpIHtcblxuICAgIGFuZ3VsYXIuZXh0ZW5kKHRoaXMsIHtcbiAgICAgICRodHRwOiRodHRwLFxuICAgICAgJHE6JHFcbiAgICB9KTtcbiAgfVxuXG4gIGdldCgpIHtcbiAgICByZXR1cm4gdGhpcy4kaHR0cC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9jb250YWN0cycpO1xuXG4gIH1cblxuICBjcmVhdGUoZGF0YSkge1xuICAgIGNvbnNvbGUubG9nKCdTZW5kIHRvIENyZWF0ZSBTZXJ2aWNlJyk7XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgcmV0dXJuIHRoaXMuJGh0dHAucG9zdCgnaHR0cDovL2xvY2FsaG9zdDo4MDgwL2NvbnRhY3RzJywgZGF0YSk7XG4gIH1cblxuICByZW1vdmUoZGF0YSkge1xuICAgIGNvbnNvbGUubG9nKCdTZW5kIHRvIERlbGV0ZSBTZXJ2aWNlJyk7XG4gICAgY29uc29sZS5sb2coZGF0YS5faWQpO1xuXG4gICAgcmV0dXJuIHRoaXMuJGh0dHAuZGVsZXRlKCdodHRwOi8vbG9jYWxob3N0OjgwODAvY29udGFjdHMvJysgZGF0YS5faWQpO1xuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQ29udGFjdHNTZXJ2aWNlO1xuIl19"}